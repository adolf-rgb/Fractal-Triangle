<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="assets/css/bootstrap.min.css">
<style>canvas{border:1px solid #ccc}</style>
</head>
<body class="text-center my-3">

<input type="number" id="d" value="3" min="0" max="7" class="form-control d-inline-block w-auto">
<button class="btn btn-primary" onclick="draw()">Draw Fractal</button>
<canvas id="c" class="d-block mx-auto my-3"></canvas>

<script>
const c=document.getElementById('c'),
x=c.getContext('2d'),
d=document.getElementById('d'),
o=20;

function tri(a,b,c,l){
  if(!l){x.beginPath();x.moveTo(...a);x.lineTo(...b);x.lineTo(...c);x.fill();return;}
  let m=(p,q)=>[(p[0]+q[0])/2,(p[1]+q[1])/2];
  tri(a,m(a,b),m(a,c),l-1);
  tri(m(a,b),b,m(b,c),l-1);
  tri(m(a,c),m(b,c),c,l-1);
}

function draw(){
  let s=Math.min(innerWidth-40,400);
  c.width=c.height=s;
  x.clearRect(0,0,s,s);
  tri([s/2,o],[o,s-o],[s-o,s-o],+d.value);
}

onresize=draw;
draw();
</script>

</body>
</html>
